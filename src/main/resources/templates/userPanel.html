<!DOCTYPE html>
<html lang="{{ str_replace('_', '-', app()->getLocale()) }}">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Great Book</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&display=swap" rel="stylesheet">

  <!-- Styles -->
  <link href="https://cdn.jsdelivr.net/npm/halfmoon@1.1.1/css/halfmoon-variables.min.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/halfmoon@1.1.1/js/halfmoon.min.js"></script>
  <link rel="stylesheet" th:href="@{/style/style.css}" type="text/css">
  <link rel="stylesheet" th:href="@{/style/fontello.css}" type="text/css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

  <script type="text/javascript">
    function confirmUserAccountDelete(){

      if(confirm("Czy na pewno chcesz usunąć konto?")){
        window.location = "/deleteUserAccount";
      }
    }
  </script>

</head>
<body>
<div class="page-wrapper with-navbar">
  <nav class="navbar justify-content-between bg-dark ">
    <div class="d-flex">
      <a href="/" class=" pt-7 font-size-20 text-white">
        Great Book
      </a>

      <span class="navbar-text text-monospace text-white ">Piekary Śląskie</span>

      <ul class="navbar-nav d-none d-md-flex font-weight-semi-bold">
        <li class="new-item active mt-auto mb-auto">
          <a href="/#kontakt" class="nav-link text-white">Kontakt</a>
        </li>
      </ul>
    </div>

    <div class="d-flex justify-content-between">
      <button onclick="confirmUserAccountDelete()" class="btn btn-danger mr-15" th:if="${session.role != 'Admin'}">
        <i class="icon-user-times"></i>Usuń konto
      </button>

      <button onclick="location='userPanel'" class="btn btn-primary mr-15">
        <i class="icon-user" th:text="${session.role}"> </i>
      </button>

      <button onclick="location='myCart'" class="btn btn-primary ml-auto mr-15"><i class="icon-basket">Koszyk</i></button>

      <button  onclick="location='logout'" class="btn btn-primary text-white ml-auto mr-15">
        <i class="icon-login"> Wyloguj się</i>
      </button>
    </div>
  </nav>
</div>

<div class="content-wrapper bg-dark-light">
  <span th:text="${deleteError}"></span>
  <div class="d-flex h-full justify-content-around">
    <div class="card mt-100 w-500 h-550 shadow text-center text-white bg-primary">
      <form th:action="@{/editUserData}" th:object="${userModel}" method="post">
        <h2 class="content-title">Edytuj dane</h2>

        <div class="form-row row-eq-spacing-sm">
          <div class="col-sm">
            <label for="name">Imię</label>
            <input type="text" class="form-control" id="name" name="name" th:field="*{name}" required="required" >
            <span th:if="${#fields.hasErrors('name')}" th:errors="*{name}">Invalid name</span>
          </div>
          <div class="col-sm">
            <label for="surname" >Nazwisko</label>
            <input type="text" class="form-control" id="surname" name="surname" required="required" th:field="*{surname}">
          </div>
        </div>

        <div class="form-row row-eq-spacing-sm">
          <div class="col-sm">
            <label for="street" >Ulica</label>
            <input type="text" class="form-control" id="street" name="street" required="required" th:field="*{street}">
          </div>
          <div class="col-sm">
            <label for="house" >Nr domu</label>
            <input type="text" class="form-control" id="house" name="house" required="required" th:field="*{houseNumber}">
            <span th:if="${#fields.hasErrors('houseNumber')}" th:errors="*{houseNumber}">Full name error</span>

          </div>
          <div class="col-sm">
            <label for="flat">Nr mieszkania</label>
            <input type="text" class="form-control" id="flat" name="flat" th:field="*{flatNumber}">
          </div>
        </div>

        <div class="form-row row-eq-spacing-sm">
          <div class="col-sm">
            <label for="town" >Miasto</label>
            <input type="text" class="form-control" id="town" name="town" required="required" th:field="*{city}">
          </div>
          <div class="col-sm">
            <label for="postal" >Kod pocztowy</label>
            <input type="text" class="form-control" id="postal" name="postal" required="required" th:field="*{postalCode}">
          </div>
        </div>

        <div class="form-row row-eq-spacing-sm">
          <div class="col-sm">
            <label for="login-reg" >Login</label>
            <input type="text" class="form-control" id="login-reg" name="login" required="required" th:field="*{login}">
          </div>
        </div>

        <div class="form-row row-eq-spacing-sm">
          <div class="col-sm">
            <label for="phone" >Nr telefonu</label>
            <input type="text" class="form-control" id="phone" name="phone" required="required" th:field="*{phoneNumber}">
          </div>
          <div class="col-sm">
            <label for="e-mail" >E-mail</label>
            <input type="text" class="form-control" id="e-mail" name="mail" required="required" th:field="*{email}">
          </div>
        </div>

        <div class="text-right">
          <input type="submit" class="btn btn-success" value="Edytuj">
        </div>
      </form>
      <div th:text="${session.message}"></div>
    </div>


    <div class="card mt-100 w-300 h-500 shadow bg-primary text-white text-center">
      <h2 class="content-title">Zmień hasło</h2>

      <form action="editUserPassword" method="post">
        <div class="form-row row-eq-spacing-sm">
          <label for="newPassword" >Nowe hasło</label>
          <input type="password" class="form-control" id="newPassword" name="newPassword" placeholder="Nowe hasło"  required="required">
        </div>
        <div class="form-row row-eq-spacing-sm">
          <label for="checkPassword" >Powtórz nowe hasło</label>
          <input type="password" class="form-control" id="checkPassword" name="checkPassword" placeholder="Powtórz nowe hasło" required="required">
        </div>

        <input type="submit" class="btn btn-success" value="Zmień">

      </form>
      <div th:text="${message}"></div>
    </div>
  </div>

  <div class="d-flex position-fixed bottom-0 w-full">
    <footer class="pl-20 bg-dark-light w-full text-white font-weight-semi-bold">
      <span>&copy: Wszelkie prawa zastrzeżone</span>
    </footer>
  </div>
</div>

</body>
</html>